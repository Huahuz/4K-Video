## 功能需求接口说明

### 1. 视频管理功能

#### 前台功能

- [ ] 电影图片反向代码

  - 功能描述

    电影图片的功能使用nginx进行反向代理，实现图片展示

- [ ] 前台视频首页展示列表数据查询

  - 功能描述

    在查询的时候，默认按照创建时间来排序。查询所有视频，进行分页显示。**不显示置顶数据**

  - url

    请求方式：GET

    url：ip:port/video/{page}

  - 入参

    | 字段名 | 类型    | 是否必填 | 备注                                    |
    | ------ | ------- | -------- | --------------------------------------- |
    | page   | Integer | 是       | 页码，路径参数，页面大小默认为9或者12条 |

  - 出参(暂定)

    | 字段名 | 类型 | 是否必填 | 备注     |
    | ------ | ---- | -------- | -------- |
    | data   | List | 是       | 返回数据 |

    data数据json格式如下：

    ```json
    [
        {
            "id": "123",
            "name": "xxx", //片名
            "categoryName": "xxx", //类别名称
            "picUrl": "xxxx" //电影图片,列表展示只展示第一张
        }
    ]
    ```

- [ ] 首页置顶信息查询

  - 功能描述

    首页一加载时，查询置顶轮播信息的数据。

  - url

    请求方式：GET

    url：ip:port/video/top-list

  - 入参

    无

  - 出参

    | 字段名 | 类型 | 是否必填 | 备注     |
    | ------ | ---- | -------- | -------- |
    | data   | List | 是       | 返回数据 |

    data数据json格式如下：

    ```json
    [
        {
            "id": "123",
            "name": "xxx", //片名
            "picUrl": "xxxx" //电影图片
        }
    ]
    ```

- [ ] 前台视频信息条件及模糊查询

  - 功能描述

    首页的片名模糊搜索，以及分类的类别选择搜索。

  - url

    请求方式：POST

    url：ip:port/video/search

  - 入参

    | 字段名   | 类型    | 是否必填 | 备注             |
    | -------- | ------- | -------- | ---------------- |
    | name     | String  | 否       | 名称，模糊搜索项 |
    | category | String  | 否       | 类别             |
    | type     | String  | 否       | 类型             |
    | region   | String  | 否       | 地区             |
    | page     | Integer | 是       | 页码             |

  - 出参

    | 字段名 | 类型 | 是否必填 | 备注     |
    | ------ | ---- | -------- | -------- |
    | data   | List | 是       | 返回数据 |

    data数据json格式如下：

    ```json
    [
        {
            "id": "123",
            "name": "xxx", //片名
            "picUrl": "xxxx" //电影图片
        }
    ]
    
    ```

- [ ] 视频详情展示

  - 功能描述

    点击图片，跳转到视频详细信息，且评论与下载链接是根据配置进行开启或关闭

  - url

    请求方式：GET

    url：ip:port/video/app/{id}/detail

  - 入参

    | 字段名 | 类型   | 是否必填 | 备注             |
    | ------ | ------ | -------- | ---------------- |
    | id     | String | 是       | 视频id，路径参数 |

  - 出参

    出参json格式如下：

    ```json
    {
        "id" : "xx",
        "name" : "xx",
        "years" : 123,
        "summary" : "xxx",
        "offLink": 0,
        "offComment": 0,
        "commentList" : [
            {
                "id" : "123",
                "userName": "xxx",
                "content": "xxxx",
                "score": 5
            }
        ],
        "pictureList" : [
            {
                "id" : "12",
                "url" : "xxxxx"
            }
        ],
        "linkList" : [
            {
                "id" : "123",
                "name" : "xxx",
                "url" : "xxxx"
            }
        ]
    }
    ```

- [ ] 前台页面个人资源添加

  - 功能描述

    新增视频信息时，页面提供影片信息及磁力链的信息进行添加。当此视频已经存在时，在此视频的详情页面进行添加磁力链接。
  
- [ ] 小程序新增评论

  - 功能描述

    在影视详情页面，提供新增评论功能，用于用户进行评论的新增。

- [ ] 投诉建议添加

  - 功能描述

    在个人界面新增投诉建议添加功能。添加到评论的投诉中。

#### 后台功能

- [x] 视频列表查询功能

  - 功能描述

    对当前所有的视频信息进行查询，只展示视频表中的数据。对于类别、类型、地区、状态、置顶等字段进行后台翻译。并进行分页。成功后返回数据。

  - url

    请求方式：POST

    url：`ip:port/video/list`

  - 入参

    | 字段名    | 类型    | 是否必填 | 备注                                     |
    | :-------- | ------- | -------- | ---------------------------------------- |
    | name      | String  | 否       | 视频名称，支持模糊                       |
    | category  | String  | 否       | 视频类别，由配置项中获取                 |
    | type      | String  | 否       | 视频类型，由配置项中获取，入参只能为单选 |
    | region    | String  | 否       | 视频地区，由配置项中获取                 |
    | status    | Integer | 否       | 状态，未发布、已发布、已冻结             |
    | beginTime | String  | 否       | 创建时间开始时间，yyyy-MM-dd HH:mm:ss    |
    | endTime   | String  | 否       | 创建时间结束时间，yyyy-MM-dd HH:mm:ss    |
    | page      | Integer | 否       | 页码                                     |
    | pageSize  | Integer | 否       | 页面大小                                 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

    data数据格式如下：

    ```json
    {
        "page" : 0,
        "pageSize" : 9,
        "total" : 100,
        "data" : [
            {
                "id" : "xx",
                "name" : "xx",
                "category" : "xx",
                "categoryName" : "xx",
                "type" : "xx",
                "typeName" : "xx",
                "region" : "xx",
                "regionName" : "xx",
                "years" : 123,
                "status" : 0,
                "isTop" : 0,
                "summary" : "xxx",
                "createTime" : "yyyy-MM-dd HH:mm:ss",
                "updateTime" : "yyyy-MM-dd HH:mm:ss",
                "comments" : "xxxx"
            }
        ]
    }
    ```

- [x] 单条视频详情信息查询

  - 功能描述

    根据视频id，查询当前视频信息所关联的链接、图片信息，翻译后并返回。

  - url

    请求方式：GET

    url：`ip:port/video/{id}/detail`

  - 入参

    | 字段名 | 类型   | 是否必填 | 备注             |
    | :----- | ------ | -------- | ---------------- |
    | id     | String | 是       | 视频id，路径参数 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

    data数据格式如下：

    ```json
    {
        "id" : "xx",
        "name" : "xx",
        "category" : "xx",
        "categoryName" : "xx",
        "type": "xxx,xxx",
        "typeName": "xxx,xxx",
        "region" : "xx",
        "regionName" : "xx",
        "years" : 123,
        "status" : 0,
        "isTop" : 0,
        "summary" : "xxx",
        "createTime" : "yyyy-MM-dd HH:mm:ss",
        "updateTime" : "yyyy-MM-dd HH:mm:ss",
        "comments" : "xxxx",
        "pictureList" : [
            {
                "id" : 12,
            	"url" : "xxxxx"
            }
        ],
        "linkList" : [
            {
                "id" : 123,
            	"name" : "xxx",
            	"url" : "xxxx"
            }
        ]
    }
    ```

- [x] 单条视频置顶功能

  - 功能描述

    对页面进行轮播展示的视频信息进行置顶，通过修改置顶状态进行实现。

  - url

    请求方式：GET

    url：`ip:port/video/{id}/top/{status}`

  - 入参

    | 字段名 | 类型    | 是否必填 | 备注                     |
    | :----- | ------- | -------- | ------------------------ |
    | id     | String  | 是       | 视频id，路径参数         |
    | status | Integer | 是       | 置顶状态，0不置顶，1置顶 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [ ] 视频信息修改

  - 功能描述

    对查询到的数据进行修改，可修改视频信息、图片信息、下载链接信息等。在修改视频信息时，并对其他级联信息进行修改。修改时可以对图片和下载链接等信息进行修改和新增。**修改的数据的id为正数，新增的数据的id为负数，负数仅作为后台进行判断的标志。**

  - url

    请求方式：POST

    url：`ip:port/video/update`

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注                     |
    | ----------- | ------- | -------- | ------------------------ |
    | id          | String  | 是       | 视频id                   |
    | name        | String  | 否       | 视频名称                 |
    | category    | Integer | 是       | 视频类别                 |
    | type        | String  | 否       | 视频类型，多个以逗号分隔 |
    | region      | String  | 否       | 地区，多个以逗号分隔     |
    | years       | Integer | 否       | 年份                     |
    | summary     | String  | 否       | 简介描述                 |
    | pictureList | List    | 否       | 图片列表                 |
    | linkList    | List    | 是       | 链接列表                 |

    json格式如下:

    ```json
    {
        "id" : "xx",
        "name" : "xx",
        "category" : "xx",
        "type": "xxx,xxx",
        "region" : "xx",
        "years" : 123,
        "summary" : "xxx",
        "pictureList" : [
            {
                "id" : 12, // 当此字段为负数时，说明这条记录为新增的数据，进行添加操作
    	        "url" : "xxxxx"
            }
        ],
        "linkList" : [
            {
                "id" : 123, // 当此字段为负数时，说明这条记录为新增的数据，进行添加操作
                "name" : "xxx",
                "url" : "xxxx"
            }
        ]
    }
    ```

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 视频新增

  - 功能描述

    后台管理端进行视频信息添加，可添加视频信息、图片信息、下载链接信息等数据。当进行添加时，并对其他信息进行级联添加。

  - url

    请求方式：POST

    url：`ip:port/video/add`

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注                     |
    | ----------- | ------- | -------- | ------------------------ |
    | name        | String  | 否       | 视频名称                 |
    | category    | Integer | 是       | 视频类别                 |
    | type        | String  | 否       | 视频类型，多个以逗号分隔 |
    | region      | String  | 否       | 地区，多个以逗号分隔     |
    | years       | Integer | 否       | 年份                     |
    | summary     | String  | 否       | 简介描述                 |
    | pictureList | List    | 否       | 图片列表                 |
    | linkList    | List    | 是       | 链接列表                 |
    
    json格式如下:
    
    ```json
    {
        "id" : "xx",
        "name" : "xx",
        "category" : "xx",
        "type": "xxx,xxx",
        "region" : "xx",
        "years" : 123,
        "summary" : "xxx",
        "pictureList" : [
            {
    	        "url" : "xxxxx"
            }
        ],
        "linkList" : [
            {
                "name" : "xxx",
                "url" : "xxxx"
            }
        ]
    }
    ```
    
  - 出参
  
    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |
  
- [x] 单条视频信息删除

  - 功能描述

    对当前视频进行删除，并级联删除当前视频对应的图片、评论、下载链接等信息。并对这些删除的数据进行日志记录。记录格式如下：

    ```tex
    [yyyy-MM-dd HH:mm:ss] 视频名称：xxx。下载链接信息：xxxx。图片地址信息：xxxx。
    ....
    [yyyy-MM-dd HH:mm:ss] 视频名称：xxx。下载链接信息：xxxx。图片地址信息：xxxx。
    ```

  - url

    请求方式：GET

    url：`ip:port/video/delete/{id}`

  - 入参

    | 字段名 | 类型   | 是否必填 | 备注             |
    | ------ | ------ | -------- | ---------------- |
    | id     | String | 是       | 视频id，路径参数 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 视频信息批量删除

  - 功能描述

    对当前视频批量进行删除，并级联删除当前视频对应的图片、评论、下载链接等信息。并对这些删除的数据进行日志记录。记录格式如下：

    ```tex
    [yyyy-MM-dd HH:mm:ss] 视频名称：xxx。下载链接信息：xxxx。图片地址信息：xxxx。
    ....
    [yyyy-MM-dd HH:mm:ss] 视频名称：xxx。下载链接信息：xxxx。图片地址信息：xxxx。
    ```

  - url

    请求方式：GET

    url：`ip:port/video/delete-batch/{ids}`

  - 入参

    | 字段名 | 类型   | 是否必填 | 备注                             |
    | ------ | ------ | -------- | -------------------------------- |
    | ids    | String | 是       | 视频ids，路径参数,多条用逗号分隔 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 单条视频审核状态修改

  - 功能描述

    对当前视频进行状态审核，默认状态为未发布，经管理员审核后为已发布，管理员可对此视频进行禁用冻结。禁用后，前台页面不显示，后台显示。

  - url

    请求方式：GET

    url路径：`ip:port/video/{id}/switch-status/{status}`

  - 入参

    | 字段名 | 类型    | 是否必填 | 备注             |
    | ------ | ------- | -------- | ---------------- |
    | id     | String  | 是       | 视频id，路径参数 |
    | status | Integer | 是       | 状态，路径参数   |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 批量视频审核状态修改

  - 功能描述

    对当前视频批量进行状态审核，默认状态为未发布，经管理员审核后为已发布，管理员可对此视频进行禁用冻结。禁用后，前台页面不显示，后台显示。

  - url

    请求方式：GET

    url路径：`ip:port/video/{ids}/switch-status-batch/{status}`

  - 入参

    | 字段名 | 类型    | 是否必填 | 备注                             |
    | ------ | ------- | -------- | -------------------------------- |
    | ids    | String  | 是       | 视频id，路径参数，多个以逗号分隔 |
    | status | Integer | 是       | 状态，路径参数                   |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 视频图片信息添加
  - 功能描述
   为当前视频进行视频海报添加，前端页面录入图片名称、图片地址、略缩图地址（预留字段）、当前视频下的图片展示顺序等。在添加成功后，向前端返回操作成功信息。

  - url

    请求方式：POST

    url路径：ip:port/picture/add

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注       |
    | ----------- | --------- | -------- | ------------------- |
    | videoId        | String  | 是       | 关联的视频id                          |
    | name           | String  | 是       | 图片名称                          |
    | url            | String  | 是       | 图片地址，默认为空               |
    | thumbnailsUrl  | Integer | 是       | 略缩图地址     |
    | orderNo        | String  | 否       | 同一视频图片顺序 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 视频图片信息修改
  - 功能描述
  该接口用于根据图片的id字段进行，图片内容信息的修改。

  - url

    请求方式：POST

    url路径：ip:port/picture/update

  - 入参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | id             | String  | 是 | 需要修改的视频图片id |
    | videoId        | String  | 是 | 关联的视频id             |
    | name           | String  | 是 | 图片名称                |
    | url            | String  | 是 | 图片地址，默认为空        |
    | thumbnailsUrl  | Integer | 是 | 略缩图地址     |
    | orderNo        | String  | 否 | 同一视频图片顺序 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |


- [x] 视频图片信息列表查询
  - 功能描述

      该接口用于查询视频图片列表

  - url

    请求方式：POST

    url路径：ip:port/picture/list

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注       |
    | ----------- | --------- | -------- | ------------------- |
    | videoId   | String  | 否       | 关联的视频id           |
    | name      | String  | 否       | 图片名称            |
    | page      | Integer | 否       | 页码               |
    | size      | Integer | 否       | 页面大小     |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 返回的数据  |

  data中的数据结构如下：

    ```json
    {
        "page" : 0,
        "size" : 9,
        "total" : 100,
        "data" : [
            {
                "id" : "xx",
                "videoId" : "xx",
                "name" : "xx",
                "url" : "xx",
                "thumbnailsUrl" : 123,
                "orderNo" : "同一视频图片顺序",
                "createTime" :  "2020-10-25 00:00:00",
                "updateTime" :  "2020-10-25 00:00:00"
            }
        ]
    }
    ```
- [x] 视频图片信息删除
  - 功能描述
      该接口通过Id删除视频图片列表信息

  - url

    请求方式：GET

    url路径：ip:port/picture/delete/{id}

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注       |
    | -----------| --------- | -------- | -----  |
    | id     | String  | 是  | 视频图片id|

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 视频图片信息批量删除
  - 功能描述
   该接口通过Id批量删除视频图片列表信息

  - url

    请求方式：GET

    url路径：ip:port/picture/delete-batch/{ids}

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注       |
    | ----------- | --------- | -------- | ------------------- |
    | ids | String | 是 | 需要批量删除的图片id，以逗号进行数据分隔。如："1,2,3,4,5"。 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 下载链接信息新增
  - 功能描述
    该接口用于将下载链接信息添加到数据库中
  - url
  
    请求方式：POST

    url路径：ip:port/download-link/add
  - 入参

    | 字段名      | 类型    | 是否必填 | 备注                             |
    | ----------- | ------- | -------- | --------------------------- |
    | videoId | String  | 是      | 下载链接对应视频id          |
    | name    | String  | 是      | 链接名称                        |
    | url     | String  | 是      | 链接地址           |
    | orderNo | Integer | 是      | 同一视频链接顺序  |
    | status  | Integer | 是      | 链接状态，未发布、已发布、已冻结    |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 下载链接信息修改
  - 功能描述
    对当前链接信息进行修改。
  - url

    请求方式：POST

    url路径：ip:port/download-link/update
    
    | 字段名 | 类型    | 是否必填 | 备注               |
    | ------ | ------- | -------- | ------------------ |
    | id     | String  | 是       | 下载链接id   |
    | status | Integer | 否     | 下载链接状态 |
    | videoId | String | 是 | 视频id |
    | name | String | 是 | 链接名称 |
    | url | String | 是 | 链接地址 |
    | orderNo | Integer | 否 | 排序，默认为0 |
  - 出参
  
    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |
  
- [x] 下载链接列表查询
  - 功能描述
    
    该接口用于查询下载链接列表，根据输入的参数进行筛选，其中name字段支持模糊筛选

  - url

     请求方式：POST

     url路径：ip:port/download-link/list

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注                |
    | ----------- | ------- | -------- | ------------------ |
    | videoId | String  | 否      | 下载链接对应视频id          |
    | name    | String  | 否      | 链接名称         |
    | url     | String  | 否      | 链接地址           |
    | orderNo | Integer | 否      | 同一视频链接顺序  |
    | status  | Integer | 否      | 链接状态，未发布、已发布、已冻结    |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |
  
  data中的数据结构如下：

    ```json
    {
       "page" : 0,
       "size" : 9,
       "total" : 100,
       "data" : [
           {  
               "id": "4",
               "videoId": "43",
               "name": "11232",
               "url": "33",
               "orderNo": 0,
               "status": 0
           }
       ]
    }
    ```

- [x] 下载链接信息单条删除
  - 功能描述

    该接口通过Id删除下载链接信息

  - url

    请求方式：GET

    url路径：ip:port/download-link/delete/{id}

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注       |
    | -----------| --------- | -------- | ----- |
    | id     | String  | 是  | 下载链接id|

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 下载链接信息批量删除
  - 功能描述
  
    该接口通过Id批量删除下载链接信息

  - url

    请求方式：GET

    url路径：ip:port/download-link/delete-batch/{ids}

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注       |
    | ----------- | --------- | -------- | ------------------- |
    | ids | String | 是 | 需要批量删除的下载链接信息id，以逗号进行数据分隔。如："1,2,3,4,5"。 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |


- [x] 评论添加

  - 功能描述

    该接口用于将用户的评论添加到当前对应的视频下方，添加的评论分为两类，一是用户对于电影的评论，二是版权方的侵权通知。对于普通的评论，则是进行添加即可；对于侵权通知，则通知管理员进行处理。

  - url

    请求方式：POST

    url路径：ip:port/comment/add

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注                             |
    | ----------- | ------- | -------- | -------------------------------- |
    | videoId     | String  | 是       | 视频id                           |
    | userName    | String  | 是       | 用户名                           |
    | content     | String  | 否       | 评论内容，默认为空               |
    | score       | Integer | 否       | 评分，1-10分默认按最高分入库     |
    | commentTime | String  | 否       | 评论时间，非必填则按当前时间入库 |
    | isComplaint | Integer | 是       | 是否为投诉评论0是 1否            |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 评论删除

  - 功能描述

      通过当前评论id，进行评论的物理删除。删除操作完成后，将信息返回。

  - url

    请求方式：GET

    url路径：ip:port/comment/delete/{id}

  - 入参

    | 字段名 | 类型   | 是否必填 | 备注               |
    | ------ | ------ | -------- | ------------------ |
    | id     | String | 是       | 视频id，为路径参数 |


  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 批量评论删除

  - 功能描述

    通过当前评论id，进行评论的批量物理删除。删除操作完成后，将信息返回。

  - url

    请求方式：GET

    url路径：ip:port/comment/delete-batch/{ids}

  - 入参

    | 字段名 | 类型   | 是否必填 | 备注                              |
    | ------ | ------ | -------- | --------------------------------- |
    | ids    | String | 是       | 视频id，为路径参数,多个以逗号分隔 |
  
  
  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 评论状态审核修改

  - 功能描述

      对当前评论进行状态修改，修改评论的状态为对应的状态。

  - url

    请求方式：GET

    url路径：ip:port/comment/{id}/switch-status/{status}

  - 入参

    | 字段名 | 类型    | 是否必填 | 备注               |
    | ------ | ------- | -------- | ------------------ |
    | id     | String  | 是       | 评论id，路径参数   |
    | status | Integer | 是       | 评论状态，路径参数 |
  
  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 评论状态批量修改

  - 功能描述

    对当前评论进行批量状态修改，修改评论的状态为对应的状态。

  - url

    请求方式：GET

    url路径：ip:port/comment/{ids}/switch-status-batch/{status}

  - 入参

    | 字段名 | 类型    | 是否必填 | 备注                            |
    | ------ | ------- | -------- | ------------------------------- |
    | ids    | String  | 是       | 评论id，路径参数,多个以逗号分隔 |
    | status | Integer | 是       | 评论状态，路径参数              |
  
  - 出参
  
    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |
  
- [x] 评论信息查询

  - 功能描述

      该接口用于进行评论列表信息查询，根据用户输入的条件，对列表进行分页查询

  - url

    请求方式：POST

    url路径：ip:port/comment/list

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注                             |
    | ----------- | ------- | -------- | -------------------------------- |
    | videoId     | String  | 否       | 视频id                           |
    | score       | Integer | 否       | 评分，1-10分默认按最高分入库     |
    | commentTime | String  | 否       | 评论时间，非必填则按当前时间入库 |
    | isComplaint | Integer | 否       | 是否为投诉评论0是 1否            |
    | page        | Integer | 否       | 页码                             |
    | pageSize    | Integer | 否       | 页面大小                         |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |
    
    data中的数据结构如下：
    
    ```json
    {
        "page" : 0,
        "pageSize" : 9,
        "total" : 100,
        "data" : [
            {
                "id" : "xx",
                "videoId" : "xx",
                "userName" : "xx",
                "content" : "xx",
                "score" : 123,
                "commentTime" : "2020-10-25 00:00:00",
                "isComplaint" : 0,
                "status" : 0
            }
        ]
    }
    ```

### 配置管理功能

#### 前台功能

- [x] 添加视频过滤条件配置

  - 功能描述

    1. 添加地区的子项配置，页面输入要添加地区名，进行添加。地区的父类型，在数据库初始化时，就会存在
    2. 手动添加类别项，点击新增按钮进行类别项的添加。
    3. 手动添加类型项数据，此配置为类别项的子配置，属于级联内容。进行手动添加。

    页面在展示时，以三个tab页签进行展示。
  
- [x] 系统配置页面

  - 功能描述

    系统配置页面操作。

#### 后台功能

- [x] 新增过滤条件项配置

  - 功能描述

    用于添加视频的类别与类型信息，添加分为类别（父类型）添加和类型（子类型）添加。在添加子类型时，需要对父类型进行级联操作。父类型分为类别配置和非类别配置，在此功能中体现为类别和地区的区别。这里扩展性不太好，基于服务器的硬件限制，这里不再做太多的扩展。非类别配置项为地区配置，此父记录在数据库初始化时，进行写入。

  - url

    请求方式：POST

    url：ip:port/config/add

  - 入参

    | 字段名   | 类型   | 是否必填 | 备注                                    |
    | -------- | ------ | -------- | --------------------------------------- |
    | parentId | String | 否       | 父配置id，为非必填项                    |
    | key      | String | 是       | 配置的key值                             |
    | value    | String | 是       | 配置的value值                           |
    | orderNo  | int    | 否       | 同级的配置顺序                          |
    | type     | int    | 是       | 是否为类别配置项0否 1是（地区不做标识） |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 修改过滤条件项配置

  - 功能描述

    根据配置项id，修改已经入库的过滤项信息。仅允许修改父配置项、顺序及页面显示的value值。

  - url

    请求方式：POST

    url：ip:port/config/update

  - 入参

    | 字段名   | 类型   | 是否必填 | 备注           |
    | -------- | ------ | -------- | -------------- |
    | id       | String | 是       | 配置id         |
    | key      | String | 是       | 配置的key值    |
    | value    | String | 否       | 配置的value值  |
    | orderNo  | int    | 否       | 同级的配置顺序 |
    | parentId | String | 否       | 父配置id       |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 删除过滤条件项配置

  - 功能描述

    根据配置项id，删除已配置信息。若为父配置id，对于其子项也进行全部删除。

  - url

    请求方式：GET

    url：ip:port/config/delete/{id}

  - 入参

    | 字段名 | 类型   | 是否必填 | 备注             |
    | ------ | ------ | -------- | ---------------- |
    | id     | String | 是       | 配置id，路径参数 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 过滤条件项列表查询

  - 功能描述

    根据条件查询已有过滤条件配置项。

  - url

    请求方式：POST

    url：ip:port/config/list

  - 入参

    | 字段名   | 类型   | 是否必填 | 备注                            |
    | -------- | ------ | -------- | ------------------------------- |
    | parentId | String | 否       | 父配置id，为非必填项            |
    | type     | int    | 否       | 是否为类别配置项0否 1是（地区） |
    | page     | int    | 否       | 页码                            |
    | size     | int    | 否       | 页面大小                        |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

    data中的数据结构如下：

    ```json
    {
        "page" : 0,
        "size" : 9,
        "total" : 100,
        "data" : [
            {
                "id" : "xx",
                "parentId" : "xx",
                "key" : "xx",
                "value" : "xx",
                "orderNo" : 0,
                "type" : 0
            }
        ]
    }
    ```

- [x] 系统配置项列表查询

  - 功能描述

    根据条件查询已有过滤条件配置项。此功能不会有太多的数据项，参数不必传入。

  - url

    请求方式：GET

    url：ip:port/sys-config/list

  - 入参

    无，此接口数据量不会太多。
    
  - 出参
  
    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |
  
    data中的数据结构如下：
  
    ```json
    {
        "page" : 0,
        "size" : 9,
        "total" : 100,
        "data" : [
            {
                "id" : "xx",
                "key" : "xx",
                "value" : "xx",
                "status": 0,
                "orderNo" : 0
            }
        ]
    }
    ```


- [x] 新增系统配置

  - 功能描述

    用于添加系统配置项

  - url

    请求方式：POST

    url：ip:port/sys-config/add

  - 入参

    | 字段名  | 类型   | 是否必填 | 备注           |
    | ------- | ------ | -------- | -------------- |
    | orderNo | int    | 否       | 同级的配置顺序 |
    | key     | String | 是       | 配置的key值    |
    | value   | String | 是       | 配置的value值  |
    
  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |
  
- [x] 修改系统配置

  - 功能描述

    根据配置项id，修改系统项配置。

  - url

    请求方式：POST

    url：ip:port/sys-config/update

  - 入参

    | 字段名  | 类型   | 是否必填 | 备注                  |
    | ------- | ------ | -------- | --------------------- |
    | id      | String | 是       | 配置id                |
    | key     | String | 是       | 配置的key值           |
    | value   | String | 否       | 配置的value值         |
    | orderNo | int    | 否       | 同级的配置顺序        |
    | status  | int    | 否       | 启用状态，0启用 1禁用 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 删除系统配置

  - 功能描述

    根据配置项id，删除已配置信息。

  - url

    请求方式：GET

    url：ip:port/sys-config/delete/{id}

  - 入参

    | 字段名 | 类型   | 是否必填 | 备注             |
    | ------ | ------ | -------- | ---------------- |
    | id     | String | 是       | 配置id，路径参数 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

#### 用户管理功能































