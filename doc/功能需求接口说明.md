## 功能需求接口说明

### 1. 视频管理功能

#### 前台功能

待确定

#### 后台功能

- [ ] 视频列表查询功能

- [ ] 视频信息条件模糊查询

- [ ] 单条视频详情信息查询

- [ ] 视频状态修改
 
- [ ] 视频新增

- [ ] 视频删除

- [ ] 视频信息批量删除

- [ ] 视频状态修改

- [ ] 视频信息修改

- [ ] 视频图片信息添加
  - 功能描述
   为当前视频进行视频海报添加，前端页面录入图片名称、图片地址、略缩图地址（预留字段）、当前视频下的图片展示顺序等。在添加成功后，向前端返回操作成功信息。

  - url

    请求方式：POST

    url路径：ip:port/picture/add

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注       |
               | ----------- | --------- | -------- | ------------------- |
    | videoId        | String  | 是       | 关联的视频id                          |
    | name           | String  | 是       | 图片名称                          |
    | url            | String  | 是       | 图片地址，默认为空               |
    | thumbnailsUrl  | Integer | 是       | 略缩图地址     |
    | orderNo        | String  | 否       | 同一视频图片顺序 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
              | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [ ] 视频图片信息修改
  - 功能描述
  该接口用于根据图片的id字段进行，图片内容信息的修改。

  - url

    请求方式：POST

    url路径：ip:port/picture/update

  - 入参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | id             | String  | 是 | 需要修改的视频图片id |
    | videoId        | String  | 是 | 关联的视频id             |
    | name           | String  | 是 | 图片名称                |
    | url            | String  | 是 | 图片地址，默认为空        |
    | thumbnailsUrl  | Integer | 是 | 略缩图地址     |
    | orderNo        | String  | 否 | 同一视频图片顺序 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
              | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |


- [ ] 视频图片信息列表查询
  - 功能描述

      该接口用于查询视频图片列表

  - url

    请求方式：POST

    url路径：ip:port/picture/list

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注       |
    | ----------- | --------- | -------- | ------------------- |
    | videoId   | String  | 否       | 关联的视频id           |
    | name      | String  | 否       | 图片名称            |
    | page      | Integer | 否       | 页码               |
    | size      | Integer | 否       | 页面大小     |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 返回的数据  |

  data中的数据结构如下：

    ```json
    {
        "page" : 0,
        "size" : 9,
        "total" : 100,
        "data" : [
            {
                "id" : "xx",
                "videoId" : "xx",
                "name" : "xx",
                "url" : "xx",
                "thumbnailsUrl" : 123,
                "orderNo" : "同一视频图片顺序",
                "createTime" :  "2020-10-25 00:00:00",
                "updateTime" :  "2020-10-25 00:00:00"
            }
        ]
    }
    ```

- [ ] 视频图片信息删除
  - 功能描述
      该接口通过Id删除视频图片列表信息

  - url

    请求方式：GET

    url路径：ip:port/picture/delete/{id}

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注       |
    | -----------| --------- | -------- | ------------------- |
    | id     | String  | 是  | 视频图片id|

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [ ] 视频图片信息批量删除
  - 功能描述
   该接口通过Id批量删除视频图片列表信息

  - url

    请求方式：GET

    url路径：ip:port/picture/delete-batch/{ids}

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注       |
    | ----------- | --------- | -------- | ------------------- |
    | ids | String | 是 | 需要批量删除的图片id，以逗号进行数据分隔。如："1,2,3,4,5"。 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [ ] 下载链接信息新增

- [ ] 下载链接状态修改

- [ ] 下载链接列表查询

- [ ] 下载链接信息单条删除

- [ ] 下载链接信息批量删除

- [ ] 评论添加

  - 功能描述

    该接口用于将用户的评论添加到当前对应的视频下方，添加的评论分为两类，一是用户对于电影的评论，二是版权方的侵权通知。对于普通的评论，则是进行添加即可；对于侵权通知，则通知管理员进行处理。

  - url

    请求方式：POST

    url路径：ip:port/comment/add

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注                             |
    | ----------- | ------- | -------- | -------------------------------- |
    | videoId     | String  | 是       | 视频id                           |
    | userName    | String  | 是       | 用户名                           |
    | content     | String  | 否       | 评论内容，默认为空               |
    | score       | Integer | 否       | 评分，1-10分默认按最高分入库     |
    | commentTime | String  | 否       | 评论时间，非必填则按当前时间入库 |
    | isComplaint | Integer | 是       | 是否为投诉评论0是 1否            |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 评论删除

  - 功能描述

      通过当前评论id，进行评论的物理删除。删除操作完成后，将信息返回。

  - url

    请求方式：GET

    url路径：ip:port/comment/delete/{id}

  - 入参

    | 字段名 | 类型   | 是否必填 | 备注               |
    | ------ | ------ | -------- | ------------------ |
    | id     | String | 是       | 视频id，为路径参数 |


  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 批量评论删除

  - 功能描述

    通过当前评论id，进行评论的批量物理删除。删除操作完成后，将信息返回。

  - url

    请求方式：GET

    url路径：ip:port/comment/delete-batch/{ids}

  - 入参

    | 字段名 | 类型   | 是否必填 | 备注                              |
    | ------ | ------ | -------- | --------------------------------- |
    | ids    | String | 是       | 视频id，为路径参数,多个以逗号分隔 |
  
  
  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 评论状态审核修改

  - 功能描述

      对当前评论进行状态修改，修改评论的状态为对应的状态。

  - url

    请求方式：GET

    url路径：ip:port/comment/{id}/switch-status/{status}

  - 入参

    | 字段名 | 类型    | 是否必填 | 备注               |
    | ------ | ------- | -------- | ------------------ |
    | id     | String  | 是       | 评论id，路径参数   |
    | status | Integer | 是       | 评论状态，路径参数 |
  
  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [x] 评论状态批量修改

  - 功能描述

    对当前评论进行批量状态修改，修改评论的状态为对应的状态。

  - url

    请求方式：GET

    url路径：ip:port/comment/{ids}/switch-status-batch/{status}

  - 入参

    | 字段名 | 类型    | 是否必填 | 备注                            |
    | ------ | ------- | -------- | ------------------------------- |
    | ids    | String  | 是       | 评论id，路径参数,多个以逗号分隔 |
    | status | Integer | 是       | 评论状态，路径参数              |
  
  - 出参
  
    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |
  
- [x] 评论信息查询

  - 功能描述

      该接口用于进行评论列表信息查询，根据用户输入的条件，对列表进行分页查询

  - url

    请求方式：POST

    url路径：ip:port/comment/list

  - 入参

    | 字段名      | 类型    | 是否必填 | 备注                             |
    | ----------- | ------- | -------- | -------------------------------- |
    | videoId     | String  | 否       | 视频id                           |
    | score       | Integer | 否       | 评分，1-10分默认按最高分入库     |
    | commentTime | String  | 否       | 评论时间，非必填则按当前时间入库 |
    | isComplaint | Integer | 否       | 是否为投诉评论0是 1否            |
    | page        | Integer | 否       | 页码                             |
    | size        | Integer | 否       | 页面大小                         |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |
    
    data中的数据结构如下：
    
    ```json
    {
        "page" : 0,
        "size" : 9,
        "total" : 100,
        "data" : [
            {
                "id" : "xx",
                "videoId" : "xx",
                "userName" : "xx",
                "content" : "xx",
                "score" : 123,
                "commentTime" : "2020-10-25 00:00:00",
                "isComplaint" : 0,
                "status" : 0
            }
        ]
    }
    ```

### 配置管理功能

#### 前台功能

- [ ] 添加视频过滤条件配置

  - 功能描述

    1. 添加地区的子项配置，页面输入要添加地区名，进行添加。地区的父类型，在数据库初始化时，就会存在
    2. 手动添加类别项，点击新增按钮进行类别项的添加。
    3. 手动添加类型项数据，此配置为类别项的子配置，属于级联内容。进行手动添加。

    页面在展示时，以三个tab页签进行展示。

#### 后台功能

- [ ] 新增过滤条件项配置

  - 功能描述

    用于添加视频的类别与类型信息，添加分为类别（父类型）添加和类型（子类型）添加。在添加子类型时，需要对父类型进行级联操作。父类型分为类别配置和非类别配置，在此功能中体现为类别和地区的区别。这里扩展性不太好，基于服务器的硬件限制，这里不再做太多的扩展。非类别配置项为地区配置，此父记录在数据库初始化时，进行写入。

  - url

    请求方式：POST

    url：ip:port/config/add

  - 入参

    | 字段名   | 类型   | 是否必填 | 备注                            |
    | -------- | ------ | -------- | ------------------------------- |
    | parentId | String | 否       | 父配置id，为非必填项            |
    | key      | String | 是       | 配置的key值                     |
    | value    | String | 是       | 配置的value值                   |
    | orderNo  | int    | 否       | 同级的配置顺序                  |
    | isType   | int    | 是       | 是否为类别配置项0否 1是（地区） |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [ ] 修改过滤条件项配置

  - 功能描述

    根据配置项id，修改已经入库的过滤项信息。仅允许修改父配置项、顺序及页面显示的value值。

  - url

    请求方式：POST

    url：ip:port/config/update

  - 入参

    | 字段名   | 类型   | 是否必填 | 备注           |
    | -------- | ------ | -------- | -------------- |
    | id       | String | 是       | 配置id         |
    | key      | String | 是       | 配置的key值    |
    | value    | String | 否       | 配置的value值  |
    | orderNo  | int    | 否       | 同级的配置顺序 |
    | parentId | String | 否       | 父配置id       |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [ ] 删除过滤条件项配置

  - 功能描述

    根据配置项id，删除已配置信息。若为父配置id，对于其子项也进行全部删除。

  - url

    请求方式：GET

    url：ip:port/config/delete/{id}

  - 入参

    | 字段名 | 类型   | 是否必填 | 备注             |
    | ------ | ------ | -------- | ---------------- |
    | id     | String | 是       | 配置id，路径参数 |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

- [ ] 过滤条件项列表查询

  - 功能描述

    根据条件查询已有过滤条件配置项。

  - url

    请求方式：POST

    url：ip:port/config/list

  - 入参

    | 字段名   | 类型   | 是否必填 | 备注                            |
    | -------- | ------ | -------- | ------------------------------- |
    | parentId | String | 否       | 父配置id，为非必填项            |
    | isType   | int    | 否       | 是否为类别配置项0否 1是（地区） |
    | page     | int    | 否       | 页码                            |
    | size     | int    | 否       | 页面大小                        |

  - 出参

    | 字段名 | 类型    | 是否必填 | 备注       |
    | ------ | ------- | -------- | ---------- |
    | code   | Integer | 是       | http状态码 |
    | msg    | String  | 否       | 状态信息   |
    | data   | Object  | 否       | 传输数据   |

    data中的数据结构如下：

    ```json
    {
        "page" : 0,
        "size" : 9,
        "total" : 100,
        "data" : [
            {
                "id" : "xx",
                "parentId" : "xx",
                "key" : "xx",
                "value" : "xx",
                "orderNo" : 0,
                "isType" : 0
            }
        ]
    }
    ```



































